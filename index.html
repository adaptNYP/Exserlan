<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta name="description" content="">
    <meta name="author" content="">
    <title>EXSERLAN</title>

    <!-- Jquery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js" defer></script>

    <!-- Jquery csv -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-csv/1.0.5/jquery.csv.min.js" defer></script>

    <!-- Bootstrap core JavaScript -->
    <script src="vendor/bootstrap/js/bootstrap.bundle.min.js" defer></script>

    <!-- Bootstrap core CSS -->
    <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet" defer>

    <!-- Chart JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.bundle.min.js" defer></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.min.css" rel="stylesheet" defer />

    <!-- Custom styles for this template -->
    <link href="css/exserlan.css" rel="stylesheet" defer>

    <!-- Custom JS -->
    <script src="JS/main.js" defer></script>
</head>

<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
        <div class="container">
            <a class="navbar-brand" href="#">EXSERLAN - Tutor view</a>
        </div>
    </nav>

    <div class="container">
        <div class="jumbotron my-4">
            <!-- Starting page -->
            <div class="firstPage">
                <h1 class="display-6">Welcome to EXSERLAN</h1>
                <p class="lead">
                    This is the tutor view for the
                    <span style="font-weight: bold; color: blue">
                        EXSERLAN (Extensible Seamless Real-time Learning Analytics)
                    </span>
                    system.
                </p>
                <p>
                    Input your surveyJS database id and access keyinto the fields below or upload a text file with the
                    same credentials, click "Start", and you are good to go!
                </p>
                <div>
                    <input type="text" size="10" id="name" style="background-color: rgb(156, 231, 206)"
                        placeholder=" name" value="test">
                    <input type="text" size="10" id="surveyJSDBid" style="background-color: #ffcccc" placeholder=" dbID"
                        value="89c190aa-9d8b-4d34-af41-61f602d54a9b">
                    <input type="text" size="10" id="surveyJSDBaccessKey" style="background-color: #ccffcc"
                        value="4d09c11a98484a91b9182b2f6bff76c9" placeholder=" accessKey">
                    <button class="btn btn-primary btn-sm" id="startButton">Start</button>
                    <button class="btn btn-primary btn-sm" id="clearButton">Clear</button>
                    <button class="btn btn-warning btn-sm" id="uploadButton"
                        onclick="document.getElementById('files').click()">Upload</button>
                    <input id="files" style="display:none;" type="file" name="files[]" multiple>
                </div>
                <div id="firstLoading" style="display: none">Loading, Please wait while we retrieve your data...</div>
            </div>

            <!-- Running Page -->
            <div class="runningPage">
                <p class="lead" style="font-weight: bold; color: red; justify-content: space-between; display: flex;">
                    <span>EXSERLAN <span id="runningtext">is running</span></span>
                    <button id="toggleStopStartButton" class="btn btn-warning btn-sm">Stop</button>
                </p>
                <div class="row">
                    <div class="col-7">
                        <div>
                            Select Date:
                        </div>
                        <select class="custom-select" id="dateSelection" onchange="changeDate(this)"></select>
                    </div>
                    <div id="current" class="col-5">
                        <div>
                            Use Current Time:
                        </div>
                        <div style="display: inline-block;">
                            <button id="currentB" class="btn btn-primary btn-sm" onclick="toggleCurrent()">True</button>
                            <span id="holding"
                                style="display: inline-block; vertical-align: middle; line-height: normal;">(Lock)</span>
                        </div>

                    </div>
                </div>
                <div class="row" id="buttons">
                    <div class="col-7">
                        <div style="display: flex; justify-content: space-between;">
                            <button type="button"
                                style="background-color: transparent; border-color: transparent; padding: 0;"
                                class="btn btn-light">Show:</button>
                            <button class="btn btn-success btn-sm" id="showChartBtn" data-toggle="collapse"
                                data-target="#mainChart" aria-expanded="true" aria-controls="mainChart"
                                onclick="showChart(); $(this).toggleClass('btn-success btn-danger');">
                                Chart</button>
                            <button class="btn btn-danger btn-sm" id="showStudentBtn" data-toggle="collapse"
                                data-target="#studentsProgress" aria-expanded="false" aria-controls="studentsProgress"
                                onclick="$(this).toggleClass('btn-success btn-danger');">
                                Student</button>
                        </div>
                    </div>
                    <div class="col-5">
                        <div>
                            <button class="btn btn-success btn-sm" onclick="exportToCSV()">Download CSV</button>
                            <button class="btn btn-success btn-sm" onclick="exportToJsonFile()">Download
                                JSON</button>
                        </div>
                    </div>
                </div>
            </div>

        </div>

        <!-- dbID and accessKey Holder -->
        <div class="firstPage" id="keyRowList" style="display: none">
            <div id="firstKeyRow" class="row">
                <div class="col-9">Name</div>
                <div class="col-3 nopadding" style="display: flex">
                    <button class="btn btn-primary btn-sm" id="clearID" style="margin: auto;">Clear</button>
                </div>
            </div>
        </div>

        <!-- runningPage -->
        <div class="chartHeight collapse" id="mainChart">
            <canvas id="chart"></canvas>
        </div>
        <div class="collapse" id="studentsProgress">
            <p>Awaiting input...</p>
        </div>
    </div>

    <!-- The Modal -->
    <div id="myModal" class="modal">
        <div class="modal-content" style="width: 92%;">
            <div class="modal-header" style="display: block;">
                <span class="close">&times;</span>
                <h2>Modal Header</h2>
            </div>
            <div style="justify-content: space-evenly; display: flex;margin: 5px 0;">
                <button class="btn btn-success btn-sm chartButton" id="chartToggle" style="display:none;"
                    onclick="chartInfoToggle()">Toggle List By Name</button>
                <button class="btn btn-success btn-sm chartButton" id="pieChartToggle" style="display:none;"
                    onclick="pieChartToggle()">Toggle PieChart</button>
            </div>
            <div class="modal-body">
                <p>Some text in the Modal Body</p>
            </div>
        </div>
    </div>

    <!-- Slider -->
    <div class="runningPage sliderDiv">
        <p style="justify-content: space-between;">
            <span id="startTime"></span>
            <span id="now"></span>
            <span id="sliderOutput"></span>
        </p>
        <input type="range" class="slider" id="myRange">
    </div>

    <!-- Footer -->
    <footer class="py-5 bg-dark footer">
        <div class="container">
            <p class="m-0 text-center text-white">Copyright &copy; Nanyang Polytechnic 2019</p>
        </div>
    </footer>

    <!-- studentTemplate Template-->
    <template id="studentTemplate">
        <div class="row text-center student">
            <div class="col-4">
                <div class="card h-100" style="border: 0;">
                    <div class="card-body">
                        <p class="card-text studentName"></p>
                    </div>
                </div>
            </div>
            <div class="col-8">
                <div class="card h-100" style="border: 0;">
                    <div class="card-body cellBody">
                    </div>
                </div>
            </div>
        </div>
        <hr>
    </template>

    <!-- cellTemplates Template-->
    <template id="cellTemplate">
        <div class="progressCell"></div>
    </template>
</body>

</html>